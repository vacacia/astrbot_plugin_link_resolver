# ğŸ”— Link Resolver

[![AstrBot Plugin](https://img.shields.io/badge/AstrBot-Plugin-blue?style=flat-square)](https://github.com/Soulter/AstrBot)
[![License: GPL-3.0](https://img.shields.io/badge/License-GPL--3.0-green?style=flat-square)](LICENSE)

æ”¯æŒç›‘å¬ç¾¤å†… **Bç«™** / **æŠ–éŸ³** / **å°çº¢ä¹¦** é“¾æ¥ï¼Œè‡ªåŠ¨è§£æå¹¶ä¸‹è½½å‘é€è§†é¢‘æˆ–å›¾é›†å†…å®¹ã€‚æ— éœ€ä»»ä½•å‘½ä»¤ï¼Œå‘é“¾æ¥å³å¯è§¦å‘ã€‚

---

## âœ¨ ç‰¹æ€§

- ğŸ“º **Bç«™è§†é¢‘è§£æ**ï¼šæ”¯æŒå¤šç§ç”»è´¨é€‰æ‹©ï¼Œæ”¯æŒå¤šPè§†é¢‘æ‰¹é‡ä¸‹è½½
- ğŸµ **æŠ–éŸ³è§£æ**ï¼šæ”¯æŒè§†é¢‘å’Œå›¾æ–‡ç¬”è®°ï¼Œè‡ªåŠ¨ä¸‹è½½å¹¶å‘é€
- ğŸ“• **å°çº¢ä¹¦åŸå›¾è§£æ**ï¼šæ”¯æŒè§†é¢‘å’Œå›¾æ–‡ç¬”è®°ï¼Œå¯ä¸‹è½½åŸå›¾

---

## âš™ï¸ é…ç½®é¡¹
åœ¨ AstrBot ç®¡ç†é¢æ¿çš„æ’ä»¶é…ç½®ä¸­å¯è°ƒæ•´ä»¥ä¸‹é€‰é¡¹ï¼š

### åŸºç¡€è®¾ç½®

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `enable_platforms` | å‹¾é€‰è¦å¯ç”¨è§£æçš„å¹³å° | Bç«™, æŠ–éŸ³, å°çº¢ä¹¦ |
| `retry_count` | è§£æå¤±è´¥é‡è¯•æ¬¡æ•°ï¼ˆæ‰€æœ‰å¹³å°å…±ç”¨ï¼‰ | 3 |
| `max_video_size_mb` | æœ€å¤§è§†é¢‘å¤§å°é™åˆ¶ (MB)ï¼Œè¶…è¿‡åˆ™è·³è¿‡ä¸‹è½½æˆ–è‡ªåŠ¨é™ç”»è´¨ | 200 |
| `api_timeout_sec` | å‘é€æ¶ˆæ¯è¶…æ—¶æ—¶é—´ (ç§’) | 600 |
| `auto_cleanup_delay` | è§†é¢‘å‘é€åè‡ªåŠ¨åˆ é™¤å»¶è¿Ÿ (ç§’) | 60 |
| `reaction_emoji_enabled` | è¯†åˆ«é“¾æ¥åæ˜¯å¦å‘è¡¨æƒ…å›åº” | âœ… å¼€å¯ |
| `reaction_emoji_id` | å›åº”çš„è¡¨æƒ… ID (å¦‚ 128169 ğŸ‘) | 128169 |

### Bç«™è®¾ç½®

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `bili_video_quality` | é»˜è®¤ä¸‹è½½ç”»è´¨ | 1080Pé«˜å¸§ç‡ |
| `bili_allow_quality_fallback` | è¶…é™æ—¶è‡ªåŠ¨é™ç”»è´¨ | âœ… å¼€å¯ |
| `bili_merge_send` | åˆå¹¶è½¬å‘å‘é€ (ä¸å¼€å¯åˆ™åªå‘è§†é¢‘) | âŒ å…³é—­ |
| `bili_enable_multi_page` | å¯ç”¨å¤šPè§†é¢‘ä¸‹è½½ | âœ… å¼€å¯ |
| `bili_multi_page_max` | å¤šPæœ€å¤šä¸‹è½½æ•°é‡ | 3 |

### æŠ–éŸ³è®¾ç½®

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `douyin_max_media` | å›¾é›†æœ€å¤šå‘é€åª’ä½“æ•° | 99 |
| `douyin_merge_send` | è§†é¢‘ä½¿ç”¨åˆå¹¶è½¬å‘ | âœ… å¼€å¯ |

### å°çº¢ä¹¦è®¾ç½®

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `xhs_max_media` | å›¾é›†æœ€å¤šå‘é€åª’ä½“æ•° | 99 |
| `xhs_merge_send` | è§†é¢‘ä½¿ç”¨åˆå¹¶è½¬å‘ | âœ… å¼€å¯ |
| `xhs_download_original` | ä¸‹è½½åŸå›¾ (PNG/JPEG) | âœ… å¼€å¯ |
| `xhs_use_cookies` | ä½¿ç”¨è‡ªå®šä¹‰ Cookies | âŒ å…³é—­ |
| `xhs_auto_unmerge_threshold_mb` | å›¾ç‰‡æ€»å¤§å°è¶…è¿‡æ­¤å€¼æ—¶åœæ­¢åˆå¹¶è½¬å‘ (MB) | 50 |


---

## ä½¿ç”¨æ–¹æ³•
ç›´æ¥åœ¨ç¾¤å†…å‘é€åŒ…å«ä»¥ä¸‹é“¾æ¥çš„æ¶ˆæ¯å³å¯è‡ªåŠ¨è§£æ

---

## ğŸ“ ç›®å½•ç»“æ„

```
astrbot_plugin_link_resolver/
â”œâ”€â”€ main.py              # ä¸»å…¥å£
â”œâ”€â”€ metadata.yaml        # æ’ä»¶å…ƒä¿¡æ¯
â”œâ”€â”€ _conf_schema.json    # é…ç½®é¡¹å®šä¹‰
â”œâ”€â”€ requirements.txt     # ä¾èµ–
â”œâ”€â”€ core/                # æ ¸å¿ƒè§£ææ¨¡å—
â”‚   â”œâ”€â”€ bilibili/        # Bç«™è§£æ
â”‚   â”œâ”€â”€ douyin/          # æŠ–éŸ³è§£æ
â”‚   â”œâ”€â”€ xiaohongshu/     # å°çº¢ä¹¦è§£æ
â”‚   â””â”€â”€ common/          # å…¬å…±å·¥å…·
â”œâ”€â”€ cache/               # åª’ä½“ç¼“å­˜ç›®å½•
â””â”€â”€ cookies/             # Cookies å­˜æ”¾ç›®å½•
```

---

## ğŸª Cookies é…ç½®ï¼ˆå¯é€‰ï¼‰

å¡«å†™ B ç«™ Cookie å¯è§£é”æ›´é«˜ç”»è´¨ï¼ˆå¦‚ 1080P60ã€4Kï¼‰ã€‚

### æ–¹å¼ä¸€ï¼šç®¡ç†é¢æ¿é…ç½®ï¼ˆæ¨èï¼‰

1. å®‰è£…æµè§ˆå™¨æ’ä»¶ [Cookies txt](https://microsoftedge.microsoft.com/addons/detail/cookies-txt/dilbcaaegopfblcjdjikanigjbcbngbk?)
2. æ‰“å¼€ [bilibili.com](https://www.bilibili.com) å¹¶ç™»å½•
3. ç‚¹å‡»æ’ä»¶çš„ **Load Cookies**ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹
4. åœ¨ AstrBot ç®¡ç†é¢æ¿ â†’ æ’ä»¶é…ç½® â†’ **Bç«™Cookies** ç²˜è´´

![è·å–cookieçš„æ’ä»¶](docs/images/image.png)

![ç‚¹å‡» Load Cookies](docs/images/image-1.png)

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ”¾ç½®æ–‡ä»¶

å°† Cookie å†…å®¹ä¿å­˜åˆ° `cookies/bili_cookies.txt`ï¼ˆæ’ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºç›®å½•ï¼‰


---


## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [GPL-3.0](LICENSE) è®¸å¯è¯ã€‚

---

## ğŸ™ è‡´è°¢

- [astrbot_plugin_parser](https://github.com/Zhalslar/astrbot_plugin_parser) 
